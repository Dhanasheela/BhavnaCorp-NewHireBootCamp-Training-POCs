<html>
  <head>
    Javascript function example
  </head>
  <body>
    <button onclick="getUsers(item)">GET</button>
    <button onclick="AddProducts()">Post</button>
    <!-- <button onclick="flterUser()">fILTER</button> -->
    <p id="demo"></p>
    <p id="post"></p>
    username:
    <p id="username"></p>
    Await:
    <p id="await"></p>
    <script>
      let text = "";
      const products = ["shirt", "pants"];
      //   var product = products.concat("fridge");
      var users = [
        { name: "dhanu", product: "shirt", price: 200 },
        { name: "raki", product: "pant", price: 150 },
      ];
      var name = "dhanu";
      var product = "shirt";
      // adding values
      var product = users.push({
        name: "uma",
        product: "fridge",
        price: 50,
      });

      function AddProducts() {
        document.getElementById("post").innerHTML = product;
      }
      //   get values using mapping
      var alluser = users.map(getUsers);

      function getUsers(item) {
        return (
          "name: " +
          [item.name] +
          "&nbsp&nbsp " +
          "product: " +
          [item.product] +
          "<br>"
        );
      }
      document.getElementById("demo").innerHTML = alluser;

      //   filter
      var flterUser1 = users.filter((flterUser) => flterUser.name == "dhanu");

      document.getElementById("username").innerHTML = flterUser1[0].name;

      // anonymous function with find
      var getData = function (item) {
        var found = users.find((item) => item.price == 150);
        console.log("name ", found);
      };
      getData();

      // async and await
      async function myData() {
        let mypromise = new Promise(function (myResolve, myReject) {
          myResolve("users");
        });
        document.getElementById("await").innerHTML = await mypromise;
      }
      myData();

      const fruitBasket = {
        apple: 27,
        grape: 0,
        pear: 14,
      };
      const getNumFruit = (fruit) => {
        return fruitBasket[fruit];
      };
      const numApples = getNumFruit("apple");
      console.log("no.of apples", numApples);
      const sleep = (ms) => {
        return new Promise((resolve) => setTimeout(resolve, ms));
      };

      const getNumFruit1 = (fruit) => {
        return sleep(1000).then((v) => fruitBasket[fruit]);
      };

      getNumFruit1("apple").then((num) => console.log("num", num)); // 27
      const control = async (_) => {
        console.log("Start");

        const numApples = await getNumFruit("apple");
        console.log("apples", numApples);

        const numGrapes = await getNumFruit("grape");
        console.log("grapes", numGrapes);

        const numPears = await getNumFruit("pear");
        console.log("pears", numPears);

        console.log("End");
      };

      //spread operator
      function sum(...input) {
        let sum = 0;
        for (let i of input) {
          sum = sum + i;
        }
        return sum;
      }
      console.log("sum", sum(2, 3));
      console.log("sum", sum(2, 3, 4));
    </script>
  </body>
</html>
